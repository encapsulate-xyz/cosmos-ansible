[Unit]
Description={{ service_identifier }}

[Service]
User={{ service_identifier }}
Group={{ service_identifier }}

{% if vars[project][type].wasmvm.version is defined %}
EnvironmentFile={{ node_environment_wasmvm_file_path }}
{% endif %}

WorkingDirectory={{ node_home_dir }}
ExecStart={{ node_bin_dir }}/{{ service_identifier }} start --home {{ node_home_dir }}{% if support_amplifier %} \
{# enabling rpc and grpc to support amplifier #}
--rpc.laddr {{ node_type_settings.rpc.address.fullnode }}:{{ rpc_port }} \
--grpc.enable true \
--grpc.address {{ node_type_settings.grpc.address.fullnode }}:{{ grpc_port }}{% endif %}

Restart=always
RestartSec=4
LimitNOFILE=65536
MemoryMax=64G
StandardOutput=append:{{ node_log_file_path }}
StandardError=inherit

[Install]
WantedBy=multi-user.target